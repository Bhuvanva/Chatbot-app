
# ğŸ¤– LabBuddy â€“ FastAPI WhatsApp Chatbot for Lab Test Booking

**LabBuddy** is an intelligent WhatsApp chatbot built with **FastAPI**, designed to help users book lab tests with national or local diagnostic labs.
It offers an intuitive conversational experience powered by the Twilio API, dynamic test/lab search, 
and step-by-step booking with secure payment handling.

---

## ğŸ’¡ Features

- ğŸ§ª Book lab tests with national or local labs
- ğŸ“ Pincode-based lab search
- ğŸ” Search by test name
- ğŸ—‚ View top 3 lab options for a given test and location
- ğŸ‘¤ Collect patient details and preferred schedule
- ğŸ’³ Provide a payment link for confirmation
- âœ… Confirmation message with full test details
- ğŸ©º Option to talk to a diagnostic expert
- ğŸ“ User response history stored in CSV

---

## ğŸ§  Technologies Used

- **FastAPI** â€“ for backend logic and routing
- **Twilio WhatsApp API** â€“ for two-way messaging
- **httpx** â€“ to call external lab data APIs
- **dotenv** â€“ for managing environment variables
- **CSV** â€“ to store user interactions

---

## ğŸ—‚ Project Structure

LabBuddy-Chatbot/
â”œâ”€â”€ app/
â”‚ â”œâ”€â”€ routes/
â”‚ â”‚ â”œâ”€â”€ lab_routes.py
â”‚ â”‚ â””â”€â”€ test_routes.py
â”œâ”€â”€ responses/ # Saved user interactions (CSV)
â”œâ”€â”€ National_Lab.txt # List of national lab names
â”œâ”€â”€ main.py # Main FastAPI application
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md # This file


---

## ğŸš€ Setup Instructions

### 1. Clone the Repository
```bash
git clone https://github.com/your-username/labbuddy-chatbot.git
cd labbuddy-chatbot


### 2. Create a Virtual Environment (optional but recommended)


```bash
python -m venv venv
source venv/bin/activate    # On Windows use `venv\Scripts\activate`


### 3. Install Dependencies


```bash
pip install -r requirements.txt


###4. Run the App Locally


```bash
uvicorn main:app --reload


### 5. Expose Your App with Ngrok (for Twilio webhook)


```bash
ngrok http 8000


###6. Set Webhook in Twilio
 
 Set your webhook to:
```arduino
https://<your-ngrok-url>/whatsapp


##ğŸ“± WhatsApp User Flow

Hi! ğŸ‘‹ Welcome to LabBuddy â€“ your trusted partner in diagnostics.
1. ğŸ§ª Book a Lab Test
2. ğŸ©º Talk to a Diagnostic Expert

â†’ Enter Pincode â†’ Select Test â†’ Get Top 3 Labs
â†’ Choose Lab â†’ Enter Patient Details
â†’ Choose Date & Time â†’ Make Payment â†’ Booking Confirmed ğŸ‰


##ğŸ“ Environment Variables

Create a .env file in the root directory to manage credentials:

```env
TWILIO_ACCOUNT_SID=your_account_sid
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_PHONE_NUMBER=whatsapp:+your_twilio_whatsapp_number

Note: Your app may not directly use these values unless youâ€™re integrating outbound messages. These can be useful for future improvements.


##âœ… Example Output

On WhatsApp:

ğŸ¥ Top national labs for CBC:

1. SRL Diagnostics - Sector 18, Noida
2. Thyrocare - Connaught Place, Delhi
3. Lal PathLabs - Civil Lines, Gurgaon

Reply with the lab number you would like to book.


## ğŸ’¡ Why This Solution?

LabBuddy offers a practical, cost-efficient, and scalable way to digitize the diagnostic lab booking experienceâ€”right from a platform 
users already trust: WhatsApp.

âœ… No app installation required â€“ Just a simple WhatsApp message to get started.
âš¡ FastAPI ensures high-performance and asynchronous handling of multiple users.
ğŸ“ Personalized lab suggestions based on location and test needs.
ğŸ’¬ Human-like conversation flow makes booking as easy as chatting.
ğŸ’³ Payment-ready and patient-aware â€“ Collects critical details securely and leads users to payment and confirmation.
ğŸ’¼ Perfect for small labs, startups, and healthcare platforms looking to digitize with minimal cost.

Whether you are a solo developer, lab operator, or startup, LabBuddy empowers you to launch a smart, reliable, and intuitive chatbot 
experience without depending on expensive enterprise platforms.